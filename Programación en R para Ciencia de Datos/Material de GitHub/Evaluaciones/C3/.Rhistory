sort(by = 'count', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27a3 <- transacciones_noche %>%
sort(by = 'count', decreasing = TRUE) %>%
as('data.frame') %>%
first()
# P7) Considerando un support mínimo de 0.02, un confidence mínimo de 0.1 y
#teniendo en cuenta que no se deben considerar reglas de asociación cuyo
#antecedente o consecuente sean vacíos:
reglas_manana <- cafeteria_con_horarios %>%
filter(hour_band == '07:00 - 11:59') %>%
transactions(format = 'long', cols = c('Transaction', 'Item')) %>%
apriori(parameter = list(supp = 0.02, conf = 0.1, minlen = 2))
reglas_tarde <- cafeteria_con_horarios %>%
filter(hour_band == '12:00 - 16:59') %>%
transactions(format = 'long', cols = c('Transaction', 'Item')) %>%
apriori(parameter = list(supp = 0.02, conf = 0.1, minlen = 2))
reglas_noche <- cafeteria_con_horarios %>%
filter(hour_band == '17:00 - 23:59') %>%
transactions(format = 'long', cols = c('Transaction', 'Item')) %>%
apriori(parameter = list(supp = 0.02, conf = 0.1, minlen = 2))
# P7.a) ¿Cuál es la regla de asociación más frecuente en cada uno de los
#horarios indicados en P6)?
respuesta27a1 <- reglas_manana %>%
sort(by = 'count', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27a2 <- reglas_tarde %>%
sort(by = 'count', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27a3 <- reglas_noche %>%
sort(by = 'count', decreasing = TRUE) %>%
as('data.frame') %>%
first()
View(respuesta27a1)
print(paste0(
'P2.7a) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación más frecuentes por horario son ',
respuesta27a1[1, 'rules'],
' presente en ',
respuesta27a1[1, 'count'],
' transacciones en el horario entre 07:00 y 11:59 hrs., ',
respuesta27a1[2, 'rules'],
' presente en ',
respuesta27a1[2, 'count'],
' transacciones en el horario entre 12:00 y 16:59 hrs. y ',
respuesta27a1[3, 'rules'],
' presente en ',
respuesta27a1[3, 'count'],
' transacciones en el horario entre 17:00 y 23:59 hrs.'
))
respuesta27a2 <- reglas_tarde %>%
sort(by = 'count', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27a3 <- reglas_noche %>%
sort(by = 'count', decreasing = TRUE) %>%
as('data.frame') %>%
first()
print(paste0(
'P2.7a) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación más frecuentes por horario son ',
respuesta27a1[1, 'rules'],
' presente en ',
respuesta27a1[1, 'count'],
' transacciones en el horario entre 07:00 y 11:59 hrs., ',
respuesta27a1[2, 'rules'],
' presente en ',
respuesta27a1[2, 'count'],
' transacciones en el horario entre 12:00 y 16:59 hrs. y ',
respuesta27a1[3, 'rules'],
' presente en ',
respuesta27a1[3, 'count'],
' transacciones en el horario entre 17:00 y 23:59 hrs.'
))
print(paste0(
'P2.7a) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación más frecuentes por horario son ',
respuesta27a1[1, 'rules'],
' presente en ',
respuesta27a1[1, 'count'],
' transacciones en el horario entre 07:00 y 11:59 hrs., ',
respuesta27a2[1, 'rules'],
' presente en ',
respuesta27a2[1, 'count'],
' transacciones en el horario entre 12:00 y 16:59 hrs. y ',
respuesta27a3[1, 'rules'],
' presente en ',
respuesta27a3[1, 'count'],
' transacciones en el horario entre 17:00 y 23:59 hrs.'
))
print(paste0(
'P2.7a) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación más frecuentes por horario son ',
respuesta27a1[1, 'rules'],
' presente en ',
respuesta27a1[1, 'count'],
' transacciones en el horario entre 07:00 y 11:59 horas, ',
respuesta27a2[1, 'rules'],
' presente en ',
respuesta27a2[1, 'count'],
' transacciones en el horario entre 12:00 y 16:59 horas y ',
respuesta27a3[1, 'rules'],
' presente en ',
respuesta27a3[1, 'count'],
' transacciones en el horario entre 17:00 y 23:59 horas.'
))
print(paste0(
'P2.7a) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación más frecuentes por horario son ',
respuesta27a1[1, 'rules'],
' presente en ',
respuesta27a1[1, 'count'],
' transacciones en el horario entre las 07:00 y las 11:59 horas, ',
respuesta27a2[1, 'rules'],
' presente en ',
respuesta27a2[1, 'count'],
' transacciones en el horario entre las 12:00 y las 16:59 horas y ',
respuesta27a3[1, 'rules'],
' presente en ',
respuesta27a3[1, 'count'],
' transacciones en el horario entre las 17:00 y las 23:59 horas.'
))
# P7.b) ¿Cuál es la regla de asociación con mayor confidence en cada uno de los
#horarios indicados en P6)?
respuesta27b1 <- reglas_manana %>%
sort(by = 'confidence', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27b2 <- reglas_tarde %>%
sort(by = 'confidence', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27b3 <- reglas_noche %>%
sort(by = 'confidence', decreasing = TRUE) %>%
as('data.frame') %>%
first()
print(paste0(
'P2.7b) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor confianza por horario son ',
respuesta27a1[1, 'rules'],
' con una confianza de ',
round(respuesta27a1[1, 'confidence'], 2),
'% en el horario entre las 07:00 y las 11:59 horas, ',
respuesta27a2[1, 'rules'],
' con una confianza de ',
round(respuesta27a2[1, 'confidence'], 2),
'% en el horario entre las 12:00 y las 16:59 horas y ',
respuesta27a3[1, 'rules'],
' con una confianza de ',
round(respuesta27a3[1, 'confidence'], 2),
'% en el horario entre las 17:00 y las 23:59 horas.'
))
print(paste0(
'P2.7b) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor confianza por horario son ',
respuesta27b1[1, 'rules'],
' con una confianza de ',
round(respuesta27b1[1, 'confidence'], 2),
'% en el horario entre las 07:00 y las 11:59 horas, ',
respuesta27b2[1, 'rules'],
' con una confianza de ',
round(respuesta27b2[1, 'confidence'], 2),
'% en el horario entre las 12:00 y las 16:59 horas y ',
respuesta27b3[1, 'rules'],
' con una confianza de ',
round(respuesta27b3[1, 'confidence'], 2),
'% en el horario entre las 17:00 y las 23:59 horas.'
))
print(paste0(
'P2.7b) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor confianza por horario son ',
respuesta27b1[1, 'rules'],
' con una confianza del ',
round((respuesta27b1[1, 'confidence'] * 100), 2),
'% en el horario entre las 07:00 y las 11:59 horas, ',
respuesta27b2[1, 'rules'],
' con una confianza del ',
round((respuesta27b2[1, 'confidence'] * 100), 2),
'% en el horario entre las 12:00 y las 16:59 horas y ',
respuesta27b3[1, 'rules'],
' con una confianza del ',
round((respuesta27b3[1, 'confidence'] * 100), 2),
'% en el horario entre las 17:00 y las 23:59 horas.'
))
# P7.c) ¿Cuál es la regla de asociación con mayor lift en cada uno de los
#horarios indicados en P6)?
respuesta27c1 <- reglas_manana %>%
sort(by = 'lift', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27c2 <- reglas_tarde %>%
sort(by = 'lift', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27c3 <- reglas_noche %>%
sort(by = 'lift', decreasing = TRUE) %>%
as('data.frame') %>%
first()
print(paste0(
'P2.7c) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor lift por horario son ',
respuesta27c1[1, 'rules'],
' con una confianza del ',
round((respuesta27c1[1, 'lift'] * 100), 2),
'% en el horario entre las 07:00 y las 11:59 horas, ',
respuesta27c2[1, 'rules'],
' con una confianza del ',
round((respuesta27c2[1, 'lift'] * 100), 2),
'% en el horario entre las 12:00 y las 16:59 horas y ',
respuesta27c3[1, 'rules'],
' con una confianza del ',
round((respuesta27c3[1, 'lift'] * 100), 2),
'% en el horario entre las 17:00 y las 23:59 horas.'
))
print(paste0(
'P2.7c) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor lift por horario son ',
respuesta27c1[1, 'rules'],
' con un lift de ',
round(respuesta27c1[1, 'lift'], 2),
' para el horario entre las 07:00 y las 11:59 horas, ',
respuesta27c2[1, 'rules'],
' con un lift de ',
round(respuesta27c2[1, 'lift'], 2),
' para el horario entre las 12:00 y las 16:59 horas y ',
respuesta27c3[1, 'rules'],
' con un lift de ',
round(respuesta27c3[1, 'lift'], 2),
' para el horario entre las 17:00 y las 23:59 horas.'
))
# P7.c) ¿Cuál es la regla de asociación con mayor lift en cada uno de los
#horarios indicados en P6)?
respuesta27c1 <- reglas_manana %>%
sort(by = 'lift', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27c2 <- reglas_tarde %>%
sort(by = 'lift', decreasing = TRUE) %>%
as('data.frame') %>%
first()
respuesta27c3 <- reglas_noche %>%
sort(by = 'lift', decreasing = TRUE) %>%
as('data.frame') %>%
first()
print(paste0(
'P2.7c) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor lift por horario son ',
respuesta27c1[1, 'rules'],
' con un lift de ',
round(respuesta27c1[1, 'lift'], 2),
' para el horario entre las 07:00 y las 11:59 horas, ',
respuesta27c2[1, 'rules'],
' con un lift de ',
round(respuesta27c2[1, 'lift'], 2),
' para el horario entre las 12:00 y las 16:59 horas y ',
respuesta27c3[1, 'rules'],
' con un lift de ',
round(respuesta27c3[1, 'lift'], 2),
' para el horario entre las 17:00 y las 23:59 horas.'
))
View(respuesta27c1)
View(respuesta27c2)
View(respuesta27c3)
print(paste0(
'P2.7c) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor lift por horario son ',
respuesta27c1[1, 'rules'],
' con un lift de ',
round(respuesta27c1[1, 'lift'], 2),
' veces al llevarlos juntos en vez de separados en el horario entre las ',
' 07:00 y las 11:59 horas, ',
respuesta27c2[1, 'rules'],
' con un lift de ',
round(respuesta27c2[1, 'lift'], 2),
' veces al llevarlos juntos en vez de separados en el horario entre las ',
' 12:00 y las 16:59 horas y ',
respuesta27c3[1, 'rules'],
' con un lift de ',
round(respuesta27c3[1, 'lift'], 2),
' veces al llevarlos juntos en vez de separados en el horario entre las ',
' 17:00 y las 23:59 horas.'
))
print(paste0(
'P2.7c) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor lift por horario son ',
respuesta27c1[1, 'rules'],
' con un lift de ',
round(respuesta27c1[1, 'lift'], 2),
' veces al llevarlos juntos en vez de por separado en el horario entre las ',
' 07:00 y las 11:59 horas, ',
respuesta27c2[1, 'rules'],
' con un lift de ',
round(respuesta27c2[1, 'lift'], 2),
' veces al llevarlos juntos en vez de por separado en el horario entre las ',
' 12:00 y las 16:59 horas y ',
respuesta27c3[1, 'rules'],
' con un lift de ',
round(respuesta27c3[1, 'lift'], 2),
' veces al llevarlos juntos en vez de por separado en el horario entre las ',
' 17:00 y las 23:59 horas.'
))
print(paste0(
'P2.7c) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor lift por horario son ',
respuesta27c1[1, 'rules'],
' con un lift de ',
round(respuesta27c1[1, 'lift'], 2),
' veces al llevarlos juntos en vez de por separado en el horario entre las ',
'07:00 y las 11:59 horas, ',
respuesta27c2[1, 'rules'],
' con un lift de ',
round(respuesta27c2[1, 'lift'], 2),
' veces al llevarlos juntos en vez de por separado en el horario entre las ',
'12:00 y las 16:59 horas y ',
respuesta27c3[1, 'rules'],
' con un lift de ',
round(respuesta27c3[1, 'lift'], 2),
' veces al llevarlos juntos en vez de por separado en el horario entre las ',
'17:00 y las 23:59 horas.'
))
inspect(reglas_manana)
reglas_manana %>% apriori(appearance = list(lhs = 'Coffee')) %>% inspect()
reglas_manana %>% apriori(appearance = list(lhs = 'Coffee'))
class(reglas_manana)
cafeteria_con_horarios %>%
filter(hour_band == '07:00 - 11:59') %>%
transactions(format = 'long', cols = c('Transaction', 'Item')) %>%
apriori(
parameter = list(supp = 0.02, conf = 0.1, minlen = 2),
appearance = list(lhs = 'Coffee')
) %>%
inpsect()
cafeteria_con_horarios %>%
filter(hour_band == '07:00 - 11:59') %>%
transactions(format = 'long', cols = c('Transaction', 'Item')) %>%
apriori(
parameter = list(supp = 0.02, conf = 0.1, minlen = 2),
appearance = list(lhs = 'Coffee')
) %>%
inspect()
# P8) Se quiere potenciar un segundo producto por la compra de un café en los
#tres horarios definidos previamente en P6:
# P8.a) Genere tres listados (uno por cada rango horario) con todas las reglas
#que contengan el producto Coffee en el antecedente.
respuesta28a1 <- cafeteria_con_horarios %>%
filter(hour_band == '07:00 - 11:59') %>%
transactions(format = 'long', cols = c('Transaction', 'Item')) %>%
apriori(
parameter = list(supp = 0.02, conf = 0.1, minlen = 2),
appearance = list(lhs = 'Coffee')
)
respuesta28a2 <- cafeteria_con_horarios %>%
filter(hour_band == '12:00 - 16:59') %>%
transactions(format = 'long', cols = c('Transaction', 'Item')) %>%
apriori(
parameter = list(supp = 0.02, conf = 0.1, minlen = 2),
appearance = list(lhs = 'Coffee')
)
respuesta28a3 <- cafeteria_con_horarios %>%
filter(hour_band == '17:00 - 23:59') %>%
transactions(format = 'long', cols = c('Transaction', 'Item')) %>%
apriori(
parameter = list(supp = 0.02, conf = 0.1, minlen = 2),
appearance = list(lhs = 'Coffee')
)
inspect(respuesta28a1)
inspect(respuesta28a2)
inspect(respuesta28a3)
View(respuesta28a1)
View(inspect(respuesta28a1))
View(inspect(respuesta28a1))
View(inspect(respuesta28a2))
View(inspect(respuesta28a3))
print(paste0(
'P2.7a) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación más frecuentes por horario son ',
respuesta27a1[1, 'rules'],
' presente en el ',
round((respuesta27a1[1, 'support'] * 100), 2),
'% de la transacciones en el horario entre las 07:00 y las 11:59 horas, ',
respuesta27a2[1, 'rules'],
' presente en el ',
round((respuesta27a2[1, 'support'] * 100), 2),
'% de la transacciones en el horario entre las 12:00 y las 16:59 horas y ',
respuesta27a3[1, 'rules'],
' presente en el ',
round((respuesta27a3[1, 'support'] * 100), 2),
'% de las transacciones en el horario entre las 17:00 y las 23:59 horas.'
))
print(paste0(
'P2.4c) Excluyendo los registros con la etiqueta NONE en los ítems, y ',
'asumiendo una distribución de Poisson para la cantidad de transacciones por',
' hora, con un valor de lambda igual al promedio de transacciones por hora ',
'en el bloque punta, si al menos un 95% de las transacciones se realizan en ',
'un tiempo razonable, se debería contar con personal suficiente para ',
'realizar ',
respuesta24c, # 1274
' transacciones por hora.'
))
print(paste0(
'P2.4b) Excluyendo los registros con la etiqueta NONE en los ítems, y ',
'asumiendo una distribución de Poisson para la cantidad de transacciones por',
' hora, con un valor de lambda igual al promedio de transacciones por hora ',
'en el bloque punta, la probabilidad de que en una hora se realicen más de ',
'1.250 transacciones es de ',
round((respuesta24b * 100), 2), # 16.12
'%. Personalmente, no recomendaría este recorte del personal, pues implica ',
'que en una de cada cuatro transacciones el tiempo la espera será excesivo, ',
'lo cual terminará espantando clientes.'
))
print(paste0(
'P2.4a) Excluyendo los registros con la etiqueta NONE en los ítems, y ',
'asumiendo una distribución de Poisson para la cantidad de transacciones por',
' hora, con un valor de lambda igual al promedio de transacciones por hora ',
'en el bloque punta, la probabilidad de que en una hora se realicen más de ',
'1.300 transacciones es de ',
round((respuesta24a * 100), 2), # 0.82
'%. Esto significa que menos del 1% de las transacciones se realizarán en un',
' tiempo que superará lo razonable.'
))
print(paste0(
'P2.7a) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación más frecuentes por horario son ',
respuesta27a1[1, 'rules'],
' presente en el ',
round((respuesta27a1[1, 'support'] * 100), 2),
'% de la transacciones en el horario entre las 07:00 y las 11:59 horas, ',
respuesta27a2[1, 'rules'],
' presente en el ',
round((respuesta27a2[1, 'support'] * 100), 2),
'% de la transacciones en el horario entre las 12:00 y las 16:59 horas y ',
respuesta27a3[1, 'rules'],
' presente en el ',
round((respuesta27a3[1, 'support'] * 100), 2),
'% de las transacciones en el horario entre las 17:00 y las 23:59 horas.'
))
print(paste0(
'P2.7b) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor confianza por horario son ',
respuesta27b1[1, 'rules'],
' con una confianza del ',
round((respuesta27b1[1, 'confidence'] * 100), 2),
'% en el horario entre las 07:00 y las 11:59 horas, ',
respuesta27b2[1, 'rules'],
' con una confianza del ',
round((respuesta27b2[1, 'confidence'] * 100), 2),
'% en el horario entre las 12:00 y las 16:59 horas y ',
respuesta27b3[1, 'rules'],
' con una confianza del ',
round((respuesta27b3[1, 'confidence'] * 100), 2),
'% en el horario entre las 17:00 y las 23:59 horas.'
))
print(paste0(
'P2.7c) Excluyendo los registros con la etiqueta NONE en los ítems, las ',
'reglas de asociación con mayor lift por horario son ',
respuesta27c1[1, 'rules'],
' con un lift de ',
round(respuesta27c1[1, 'lift'], 2),
' veces al llevarlos juntos en vez de por separado en el horario entre las ',
'07:00 y las 11:59 horas, ',
respuesta27c2[1, 'rules'],
' con un lift de ',
round(respuesta27c2[1, 'lift'], 2),
' veces al llevarlos juntos en vez de por separado en el horario entre las ',
'12:00 y las 16:59 horas y ',
respuesta27c3[1, 'rules'],
' con un lift de ',
round(respuesta27c3[1, 'lift'], 2),
' veces al llevarlos juntos en vez de por separado en el horario entre las ',
'17:00 y las 23:59 horas.'
))
print(paste(
'P2.8b) Excluyendo los registros con la etiqueta NONE en los ítems y ',
'considerando los valores anteriormente obtenidos, podría recomendar, para ',
'el horario entre las 07:00 y las 11:59 horas, la asociación de Coffe con ',
'Pastry pues, si bien no tiene el lift más alto este sigue siendo mayor a ',
'1, presentando además mayor support y confidence.'
))
print(paste(
'P2.8b) Excluyendo los registros con la etiqueta NONE en los ítems y',
'considerando los valores anteriormente obtenidos, podría recomendar, para',
'el horario entre las 07:00 y las 11:59 horas, la asociación de Coffe con',
'Pastry pues, si bien no tiene el lift más alto este sigue siendo mayor a',
'1, presentando además mayor support y confidence.'
))
print(paste(
'P2.8b) Excluyendo los registros con la etiqueta NONE en los ítems y',
'considerando los valores anteriormente obtenidos, podría recomendar, para',
'el horario entre las 07:00 y las 11:59 horas, la asociación de Coffe con',
'Pastry pues, si bien no tiene el lift más alto este sigue siendo mayor a',
'1, presentando además mayor support y confidence. Para el horario entre las',
'12:00 y las 16:59 horas podría recomendar la asociación Coffe y Cake, por',
'razones similares a las presentadas en el bloque anterior. Finalmente, para',
'el horario entre las 17:00 y las 23:59 horas, el candidato natural es la',
'asociación entre Coffe y Cake, pues presenta los mejores support,',
'confidence y lift del bloque.'
))
print(paste(
'P2.8b) Excluyendo los registros con la etiqueta NONE en los ítems y',
'considerando los valores anteriormente obtenidos, podría recomendar, para',
'el horario entre las 07:00 y las 11:59 horas, la asociación de Coffe con',
'Pastry pues, si bien no tiene el lift más alto, éste sigue siendo mayor a',
'1, presentando además mayor support y confidence. Para el horario entre las',
'12:00 y las 16:59 horas podría recomendar la asociación Coffe y Cake, por',
'razones similares a las presentadas en el bloque anterior. Finalmente, para',
'el horario entre las 17:00 y las 23:59 horas, el candidato natural es la',
'asociación entre Coffe y Cake, pues presenta los mejores support,',
'confidence y lift del bloque.'
))
